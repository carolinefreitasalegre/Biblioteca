@inherits LayoutComponentBase
@inject NavigationManager NavigationManager

<RadzenLayout>
    <RadzenHeader>
        <RadzenStack Orientation="Orientation.Horizontal" AlignItems="AlignItems.Center" Gap="0" Class="rz-py-2 rz-px-4">
            <RadzenSidebarToggle Click="@(() => sidebarExpanded = !sidebarExpanded)" />
            <RadzenLabel Text="Biblioteca Dashboard" Class="rz-text-uppercase rz-font-weight-bold" />

            <RadzenSpacer /> 
            
            <AuthorizeView>
                <Authorized>
                    <RadzenButton Text="Logout" Icon="logout" Click="@Logout" ButtonStyle="ButtonStyle.Danger" Variant="Variant.Flat" />
                </Authorized>
            </AuthorizeView>
            
        </RadzenStack>
    </RadzenHeader>
    
    <RadzenSidebar FullHeight="true" @bind-Expanded="@sidebarExpanded">
        <RadzenPanelMenu>

            <RadzenPanelMenuItem 
                Text="Home" 
                Icon="home" 
                Path="home" />

            @* <RadzenPanelMenuItem  *@
            @*     Text="Usuários"  *@
            @*     Icon="group"  *@
            @*     Path="users" /> *@

            <RadzenPanelMenuItem 
                Text="Minha Coleção" 
                Icon="collections_bookmark" 
                Path="minha-colecao" />

            <RadzenPanelMenuItem 
                Text="Adicionar Livros" 
                Icon="library_add" 
                Path="adicionar-livro" />

            <RadzenPanelMenuItem 
                Text="Área do Administrador" 
                Icon="admin_panel_settings" 
                Path="area-administrador" />

        </RadzenPanelMenu>

       
    </RadzenSidebar>

    
    <RadzenBody>
        <div class="rz-p-4">
            @Body 
        </div>
    </RadzenBody>
    
    <RadzenFooter Class="rz-text-align-center rz-py-2">
        &copy; Biblioteca App @DateTime.Now.Year
    </RadzenFooter>
    
</RadzenLayout>


@code {
   

    bool sidebarExpanded = true;
    
    [Inject] 
    public AuthenticationStateProvider AuthStateProvider { get; set; } = default!; 
    
    [Inject] 
    public NavigationManager NavManager { get; set; } = default!; 

    private void Logout()
    {
        ((CustomAuthenticationStateProvider)AuthStateProvider).NotifyUserLoggedOut();
        
        NavManager.NavigateTo("/", forceLoad: true); 
    }
}